{% extends  './user/sidebar.html'%} 
{% block main %}
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="alert alert-success alert-dissmissable mt-2 mr-2" role="alert">
        {% for message in messages %}
        <button type="button" class="close" data-dismiss="alert" aria-label="close">
            <span aria-hidden="True">x</span>
        </button>
        {{message}}
        {% endfor %}
    </div> 
    {% endif %} 
    {% endwith %}
    <!-- table -->
    <table class="table">
        <tr>
          <th>ID</th>
          <th>Title</th> 
          <th>Author</th>
          <th>Issue Date</th>
          <th>Return Date</th> 
          <th>Action</th>
        </tr>
        <!-- for loop to retreive all books from the database -->
        {% for row in transactions %} 
        <tr>
          <td>{{row.transaction_id}}</td>
          <td>{{row.title}}</td>
          <td>{{row.author}}</td>
          <td>{{row.issue_date}}</td>
          <td>{{row.return_date}}</td>
          <td>
            <!-- urls for returning a book -->
            <a href="return-book/{{row.book_id}}" class="btn btn-primary btn-xs mt-1">Return</a>
          </td>
        </tr>
        {% endfor %} 
    </table> 
{% endblock %}